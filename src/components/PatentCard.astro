---
interface Props {
  title: string;
  patentNumber: string;
  status: 'granted' | 'pending';
  filingDate: Date;
  grantDate?: Date;
  description: string;
  certificateUrl: string;
  slug: string;
}

const { title, patentNumber, status, filingDate, grantDate, description, certificateUrl, slug } = Astro.props;

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat('en-US', { month: 'short', year: 'numeric' }).format(date);
};
---

<article class="group p-6 rounded-lg border border-[var(--border)] bg-[var(--bg-surface)] hover:border-[var(--accent)] transition-colors">
  <div class="flex items-start justify-between gap-4 mb-3">
    <h3 class="text-lg font-semibold group-hover:text-[var(--accent)] transition-colors">
      <a href={`/patents/${slug}`} class="hover:underline">
        {title}
      </a>
    </h3>
    <span
      class:list={[
        "px-2 py-1 text-xs font-medium rounded uppercase shrink-0",
        status === 'granted'
          ? "bg-green-500/10 text-green-500"
          : "bg-yellow-500/10 text-yellow-500"
      ]}
    >
      {status}
    </span>
  </div>

  <p class="text-[var(--text-muted)] text-sm mb-4 line-clamp-2">
    {description}
  </p>

  <div class="flex flex-wrap items-center gap-4 text-sm text-[var(--text-muted)] mb-4">
    <span class="font-mono text-[var(--accent)]">#{patentNumber}</span>
    <span>Filed: {formatDate(filingDate)}</span>
    {grantDate && <span>Granted: {formatDate(grantDate)}</span>}
  </div>

  <div class="flex items-center gap-4">
    <a
      href={`/patents/${slug}`}
      class="inline-flex items-center gap-1 text-sm text-[var(--text-muted)] hover:text-[var(--accent)] transition-colors"
    >
      View Details
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </a>
    <a
      href={certificateUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-1 text-sm text-[var(--accent)] hover:underline"
    >
      View Certificate
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
      </svg>
    </a>
  </div>
</article>
