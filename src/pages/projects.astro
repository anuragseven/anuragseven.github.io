---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => (b.data.featured ? 1 : 0) - (a.data.featured ? 1 : 0));
---

<BaseLayout title="Projects" description="Browse my software engineering projects">
  <section class="container mx-auto px-4 py-16">
    <h1 class="text-4xl font-bold mb-4">Projects</h1>
    <p class="text-[var(--text-muted)] mb-8 max-w-2xl">
      A collection of projects I've worked on, from production systems to side projects.
    </p>

    <div class="grid md:grid-cols-2 gap-6">
      {sortedProjects.map((project) => (
        <ProjectCard
          title={project.data.title}
          description={project.data.description}
          tech={project.data.tech}
          github={project.data.github}
          demo={project.data.demo}
          slug={project.slug}
        />
      ))}
    </div>
  </section>
</BaseLayout>
